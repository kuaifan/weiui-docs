(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{267:function(t,a,s){t.exports=s.p+"assets/img/wxpay_android.eaf1b50f.png"},268:function(t,a,s){t.exports=s.p+"assets/img/wxpay_ios.eaeeb1b1.png"},368:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"支付模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#支付模块","aria-hidden":"true"}},[t._v("#")]),t._v(" 支付模块")]),t._v(" "),e("ul",[e("li",[t._v("包含支持：微信支付、支付宝支付。")])]),t._v(" "),e("blockquote",[e("p",[t._v("首次使用请执行")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("weiui plugin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" pay\n")])])]),e("blockquote",[e("p",[t._v("需要加载的模块")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pay "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireModule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pay'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"参数配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数配置")]),t._v(" "),e("p",[t._v("请查阅"),e("router-link",{attrs:{to:"/guide/config.html"}},[t._v("配置相关")])],1),t._v(" "),e("h2",{attrs:{id:"微信支付"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#微信支付","aria-hidden":"true"}},[t._v("#")]),t._v(" 微信支付")]),t._v(" "),e("h4",{attrs:{id:"支付配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#支付配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 支付配置")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("Android")]),t._v("配置")])]),t._v(" "),e("p",[t._v("在创建项目的时候**"),e("code",[t._v("默认已经配置好")]),t._v("**路径了，但是如果开发中修改过包名则需要确保以下路径名称与包名一致，否则用户付款完成后无法重新唤起APP。")]),t._v(" "),e("p",[e("img",{attrs:{src:s(267),alt:""}})]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("iOS")]),t._v("配置")])]),t._v(" "),e("p",[t._v("如果已经按上面"),e("router-link",{attrs:{to:"/guide/config.html"}},[t._v("参数配置")]),t._v("配置好的话，在编译"),e("code",[t._v("npm run [serve|dev|build]")]),t._v("项目的时候**"),e("code",[t._v("系统已经自动生成")]),t._v("**理论上无需手动设置，但是真正打包项目的时候需要确认设置"),e("code",[t._v("Info")]),t._v(">"),e("code",[t._v("URL Types")]),t._v("，否则用户付款完成后无法重新唤起APP。")],1),t._v(" "),e("p",[e("img",{attrs:{src:s(268),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"调起支付"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#调起支付","aria-hidden":"true"}},[t._v("#")]),t._v(" 调起支付")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("pay.weixin")]),t._v(" 微信支付")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param params    详细参数\n * @param callback  回调事件\n */")]),t._v("\npay"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("weixin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h5",{attrs:{id:"params-参数说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#params-参数说明","aria-hidden":"true"}},[t._v("#")]),t._v(" params 参数说明")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("属性名")]),t._v(" "),e("th",[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("必须")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("appid")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("应用ID")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("partnerid")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("商户号")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("prepayid")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("预支付交易会话ID")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("package")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("扩展字段")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("noncestr")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("随机字符串")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("timestamp")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("时间戳")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("sign")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",[t._v("签名")]),t._v(" "),e("td",[t._v("-")])])])]),t._v(" "),e("p",[t._v("参数说明详见官方文档"),e("a",{attrs:{href:"https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=9_12",target:"_blank",rel:"noopener noreferrer"}},[t._v("调起支付API"),e("OutboundLink")],1)]),t._v(" "),e("h5",{attrs:{id:"callback-回调result说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#callback-回调result说明","aria-hidden":"true"}},[t._v("#")]),t._v(" callback 回调"),e("code",[t._v("result")]),t._v("说明")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    status"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//状态，详见：注①")]),t._v("\n    msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//状态描述")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注①：")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("0")]),t._v("成功")]),t._v(" "),e("li",[e("code",[t._v("-1")]),t._v("错误（可能的原因：签名错误、未注册或不正确的APPID、注册的APPID与设置的不匹配、其他异常等）")]),t._v(" "),e("li",[e("code",[t._v("-2")]),t._v("用户取消（无需处理。发生场景：用户不支付了，点击取消，返回APP）")]),t._v(" "),e("li",[e("code",[t._v("-999")]),t._v("启动微信支付失败（可能得原因：用户未安装微信客户端）")])]),t._v(" "),e("h2",{attrs:{id:"支付宝支付"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#支付宝支付","aria-hidden":"true"}},[t._v("#")]),t._v(" 支付宝支付")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("pay.alipay")]),t._v(" 支付宝支付")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param payData   请求参数   \n * @param callback  回调事件\n */")]),t._v("\npay"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("alipay")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payData"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h5",{attrs:{id:"paydata请求参数示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#paydata请求参数示例","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",[t._v("payData")]),t._v("请求参数示例")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app_id=2015052600090779&biz_content=%7B%22timeout_express%22%3A%2230m%22%2C%22product_code%22%3A%22QUICK_MSECURITY_PAY%22%2C%22total_amount%22%3A%220.01%22%2C%22subject%22%3A%221%22%2C%22body%22%3A%22%E6%88%91%E6%98%AF%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%22%2C%22out_trade_no%22%3A%22IQJZSRC1YMQB5HU%22%7D&charset=utf-8&format=json&method=alipay.trade.app.pay&notify_url=http%3A%2F%2Fdomain.merchant.com%2Fpayment_notify&sign_type=RSA2&timestamp=2016-08-25%2020%3A26%3A31&version=1.0&sign=cYmuUnKi5QdBsoZEAbMXVMmRWjsuUj%2By48A2DvWAVVBuYkiBj13CFDHu2vZQvmOfkjE0YqCUQE04kqm9Xg3tIX8tPeIGIFtsIyp%2FM45w1ZsDOiduBbduGfRo1XRsvAyVAv2hCrBLLrDI5Vi7uZZ77Lo5J0PpUUWwyQGt0M4cj8g%3D\n")])])]),e("p",[t._v("请求参数说明详见官方文档"),e("a",{attrs:{href:"https://docs.open.alipay.com/204/105465/",target:"_blank",rel:"noopener noreferrer"}},[t._v("App支付请求参数说明"),e("OutboundLink")],1)]),t._v(" "),e("h5",{attrs:{id:"callback-回调result说明-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#callback-回调result说明-2","aria-hidden":"true"}},[t._v("#")]),t._v(" callback 回调"),e("code",[t._v("result")]),t._v("说明")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    status"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9000"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//状态结果，详见：注②（官方字段名称为：resultStatus）")]),t._v("\n    result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//处理结果(类型为json结构字符串)")]),t._v("\n    memo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//描述信息(类型为字符串)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注②：")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("9000")]),t._v("订单支付成功")]),t._v(" "),e("li",[e("code",[t._v("8000")]),t._v("正在处理中，支付结果未知（有可能已经支付成功），请查询商户订单列表中订单的支付状态")]),t._v(" "),e("li",[e("code",[t._v("4000")]),t._v("订单支付失败")]),t._v(" "),e("li",[e("code",[t._v("5000")]),t._v("重复请求")]),t._v(" "),e("li",[e("code",[t._v("6001")]),t._v("用户中途取消")]),t._v(" "),e("li",[e("code",[t._v("6002")]),t._v("网络连接出错")]),t._v(" "),e("li",[e("code",[t._v("6004")]),t._v("支付结果未知（有可能已经支付成功），请查询商户订单列表中订单的支付状态")]),t._v(" "),e("li",[e("code",[t._v("其它")]),t._v("其它支付错误")])]),t._v(" "),e("p",[t._v("返回参数说明详见官方文档"),e("a",{attrs:{href:"https://docs.open.alipay.com/204/105301/",target:"_blank",rel:"noopener noreferrer"}},[t._v("服务器同步/异步通知参数说明"),e("OutboundLink")],1)])])},[],!1,null,null,null);a.default=n.exports}}]);